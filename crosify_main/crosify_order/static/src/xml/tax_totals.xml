<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
        <t t-inherit="account.TaxTotalsField" t-inherit-mode="extension">
            <xpath expr="//tbody" position="replace">
                <t t-foreach="totals.subtotals" t-as="subtotal" t-key="subtotal['name']">
                    <tr>
                        <td class="o_td_label">
                            <label class="o_form_label o_tax_total_label" t-out="subtotal['name']"/>
                        </td>

                        <td class="o_list_monetary">
                            <span t-att-name="subtotal['name']" style="white-space: nowrap; font-weight: bold;"
                                  t-out="subtotal['formatted_amount']"/>
                        </td>
                    </tr>

                    <t t-foreach="totals.groups_by_subtotal[subtotal['name']]" t-as="taxGroup"
                       t-key="taxGroup.group_key">
                        <TaxGroupComponent
                                currency="currency"
                                taxGroup="taxGroup"
                                isReadonly="readonly"
                                onChangeTaxGroup.bind="_onChangeTaxValueByTaxGroup"
                                invalidate.bind="invalidate"
                        />
                    </t>
                </t>

                <!--                discount-->
                <tr>
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Discount</label>
                    </td>

                    <td class="o_list_monetary">
                        <div name="discount" class="o_field_widget o_field_float">
                            <input type="text" id="discount" inputmode="decimal" class="o_input"/>
                        </div>
                    </td>
                </tr>

                <tr t-if="'formatted_rounding_amount' in totals and totals.rounding_amount !== 0 and totals.display_rounding">
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Rounding</label>
                    </td>
                    <td class="o_list_monetary">
                        <span
                                t-out="totals.formatted_rounding_amount"
                        />
                    </td>
                </tr>
                <!--                Tips-->
                <tr>
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Tips</label>
                    </td>

                    <td class="o_list_monetary">
                        <div name="tip" class="o_field_widget o_field_float">
                            <input type="text" id="tip" inputmode="decimal" class="o_input"/>
                        </div>
                    </td>
                </tr>
                <!-- Total amount with all taxes-->
                <tr>
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Total</label>
                    </td>

                    <td class="o_list_monetary">
                        <span
                                name="amount_total"
                                t-att-class="Object.keys(totals.groups_by_subtotal).length > 0 ? 'oe_subtotal_footer_separator' : ''"
                                t-out="totals.formatted_amount_total"
                                style="font-size: 1.3em; font-weight: bold; white-space: nowrap;"
                        />
                    </td>
                </tr>
            </xpath>

        </t>
</templates>